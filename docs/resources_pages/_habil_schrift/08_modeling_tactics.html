<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>9&nbsp; Modeling tactics – Modeling variationist corpus data: A mixed-effects framework</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./09_model_predictions.html" rel="next">
<link href="./07_foregrounding_variation.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./08_modeling_tactics.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Modeling tactics</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Modeling variationist corpus data: A mixed-effects framework</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_research_objectives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Research objectives</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_statistical_inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Statistical inferences</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_data_structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data structure</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_statistical_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Statistical models: Integration of research objectives and data structure</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_model_specification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Model specification</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_token_level_predictors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Token-level predictors</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_foregrounding_variation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Foregrounding variation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08_modeling_tactics.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Modeling tactics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09_model_predictions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Model summary: Adjusted predictions and comparisons</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#using-random-effects-to-assess-the-generality-of-a-pattern" id="toc-using-random-effects-to-assess-the-generality-of-a-pattern" class="nav-link active" data-scroll-target="#using-random-effects-to-assess-the-generality-of-a-pattern"><span class="header-section-number">9.1</span> Using random effects to assess the generality of a pattern</a>
  <ul class="collapse">
  <li><a href="#consistency-across-speakers" id="toc-consistency-across-speakers" class="nav-link" data-scroll-target="#consistency-across-speakers"><span class="header-section-number">9.1.1</span> Consistency across speakers</a></li>
  <li><a href="#residual-variation-among-speakers" id="toc-residual-variation-among-speakers" class="nav-link" data-scroll-target="#residual-variation-among-speakers"><span class="header-section-number">9.1.2</span> Residual variation among speakers</a></li>
  <li><a href="#residual-variation-among-words" id="toc-residual-variation-among-words" class="nav-link" data-scroll-target="#residual-variation-among-words"><span class="header-section-number">9.1.3</span> Residual variation among words</a></li>
  <li><a href="#token-level-predictors-consistency-across-speakers" id="toc-token-level-predictors-consistency-across-speakers" class="nav-link" data-scroll-target="#token-level-predictors-consistency-across-speakers"><span class="header-section-number">9.1.4</span> Token-level predictors: Consistency across speakers</a></li>
  <li><a href="#word-level-predictors-consistency-across-speakers" id="toc-word-level-predictors-consistency-across-speakers" class="nav-link" data-scroll-target="#word-level-predictors-consistency-across-speakers"><span class="header-section-number">9.1.5</span> Word-level predictors: Consistency across speakers</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-modeling-tactics" class="quarto-section-identifier"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Modeling tactics</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Interesting technique: Post-data manipulation of the random effects SD: (Brown &amp; Mosteller 1991: 231)</p>
<ul>
<li><p>In practice, the laboratories are likely to be a “scattering” rather than a random sample. In such cases it seems better (1) to begin by treating them as if they were a random sample, and then (2) to add “a grain of salt,” increasing the estimated component of variance to allow for nonrandom selection.</p></li>
<li><p>Post-processing random effects to address questions of generality</p></li>
<li><p>Random slopes as a strategy for assessing the generality of a pattern</p></li>
</ul>
<section id="using-random-effects-to-assess-the-generality-of-a-pattern" class="level2 page-columns page-full" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="using-random-effects-to-assess-the-generality-of-a-pattern"><span class="header-section-number">9.1</span> Using random effects to assess the generality of a pattern</h2>
<p>We discussed the limited role of statistics for establishing the generality of a pattern we have found in our data. Whenever we infer beyond the set of speakers, conditions, and circumstances we have observed, conclusions rest in part on extra-statistical sources of information. Nevertheless, our data do offer information that allow us to form some judgement on the degree of tenacity with which we should cling to broad inferences. Broad inferences represent the nomothetic orientation in empirical work, and usually include statements about typical, or average cases. As we discussed in <a href="07_foregrounding_variation.html" class="quarto-xref"><span>Chapter 8</span></a>, the idiographic orientation offers an additional approach to data. In the following, we will demonstrate how we can use a mixed-effects regression model to pursue strategies at this level of analysis. These will provide supplementary insights that enable us to audit our inferences about the average case. We will see that this approach will uncover linguistically meaningful assessments of variability, and also add data-based clues to the generality of the average patterns we infer.</p>
<p>I will use the term <em>consistency</em></p>
<ul>
<li><span class="citation" data-cites="Cedergren_Sankoff1974">Cedergren and Sankoff (<a href="references.html#ref-Cedergren_Sankoff1974" role="doc-biblioref">1974, 334</a>)</span> “it is difficult to escape the conclusion that those aspects of performance that are found to be thoroughly systematic in an individual and throughout a community are relfections of linguistic competence.”</li>
</ul>
<section id="consistency-across-speakers" class="level3" data-number="9.1.1">
<h3 data-number="9.1.1" class="anchored" data-anchor-id="consistency-across-speakers"><span class="header-section-number">9.1.1</span> Consistency across speakers</h3>
<p><span class="citation" data-cites="Sidman1960">Sidman (<a href="references.html#ref-Sidman1960" role="doc-biblioref">1960, 46</a>)</span> refers to this as subject generality.</p>
</section>
<section id="residual-variation-among-speakers" class="level3 page-columns page-full" data-number="9.1.2">
<h3 data-number="9.1.2" class="anchored" data-anchor-id="residual-variation-among-speakers"><span class="header-section-number">9.1.2</span> Residual variation among speakers</h3>
<p>The residual variation among speakers is interesting in two respects. For one, it tells us about the amount of remaining between-speaker variation, i.e.&nbsp;the variation that is left unexplained (in a statistical sense) once the speaker-level predictors (if any) are taken into account. Further, it provides a relevant yardstick for assessing the explanatory power of the speaker-level predictors. If the remaining variation overwhelms that accounted for by cluster-level predictors, this can be interpreted either as indicating the predictive incapacity of the model and/or the large amount of unsystematic idiosyncratic behavior of the individual speakers.</p>
<p>The left-hand dot diagram in <a href="#fig-ing-fitted-values-speaker" class="quarto-xref">Figure&nbsp;<span>9.1</span></a> shows the fitted values for the speakers in the sample on the proportions scale. The social predictors apparently account for a considerable variation in g-dropping. The right-hand dot diagram in <a href="#fig-ing-fitted-values-speaker" class="quarto-xref">Figure&nbsp;<span>9.1</span></a> compares this systematic part of the model to the residual variation among speakers on the model (i.e.&nbsp;logit) scale. The residual variation is noticeably greater, which indicates that considerabl parts of the variation among speaker is left unaccounted for.</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-ing-fitted-values-speaker" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full" width="384">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-ing-fitted-values-speaker-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-fitted-values-speaker-1.png" id="fig-ing-fitted-values-speaker" class="img-fluid figure-img" width="384">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig quarto-uncaptioned margin-caption" id="fig-ing-fitted-values-speaker-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.1
</figcaption>
</figure>
</div>
</div>
</div>
<p>To get a sense of what the residual variation among speakers amounts to on the proportion scale, <a href="#fig-ing-speaker-residual-variation-proportion-scale" class="quarto-xref">Figure&nbsp;<span>9.2</span></a> illustrates the model-based residual variation among speakers for two conditions, one with a predicted probability near .50 (where between-speaker variation is greatest on the proportion scale), and one closer to the bounds of the scale. Icons are used to give a sense of the variability among 100 hypothetical speakers. This technique is borrowed from <span class="citation" data-cites="Kay_etal2016">Kay et al. (<a href="references.html#ref-Kay_etal2016" role="doc-biblioref">2016</a>)</span>. The probability distribution that is represented by the random intercept standard deviation is visualized by discrete icons. Each icon depicts a 1 percent probability, i.e.&nbsp;roughly 1 percent in the sampled population of speakers.</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-ing-speaker-residual-variation-proportion-scale" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full" width="384">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-ing-speaker-residual-variation-proportion-scale-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-speaker-residual-variation-proportion-scale-1.png" id="fig-ing-speaker-residual-variation-proportion-scale" class="img-fluid figure-img" width="384">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig quarto-uncaptioned margin-caption" id="fig-ing-speaker-residual-variation-proportion-scale-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.2
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="residual-variation-among-words" class="level3 page-columns page-full" data-number="9.1.3">
<h3 data-number="9.1.3" class="anchored" data-anchor-id="residual-variation-among-words"><span class="header-section-number">9.1.3</span> Residual variation among words</h3>
<p>We can do the same for the the other clustering variable, Item. <a href="#fig-ing-fitted-values-item" class="quarto-xref">Figure&nbsp;<span>9.3</span></a> shows the fitted values for the lexical items in the estimation sample.</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-ing-fitted-values-item" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full" width="336">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-ing-fitted-values-item-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-fitted-values-item-1.png" id="fig-ing-fitted-values-item" class="img-fluid figure-img" width="336">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig quarto-uncaptioned margin-caption" id="fig-ing-fitted-values-item-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.3
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-ing-fitted-values-residuals-item" class="quarto-xref">Figure&nbsp;<span>9.4</span></a> compares the fitted values against the residuals on the model scale.</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-ing-fitted-values-residuals-item" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full" width="288">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-ing-fitted-values-residuals-item-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-fitted-values-residuals-item-1.png" id="fig-ing-fitted-values-residuals-item" class="img-fluid figure-img" width="288">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig quarto-uncaptioned margin-caption" id="fig-ing-fitted-values-residuals-item-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.4
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="token-level-predictors-consistency-across-speakers" class="level3 page-columns page-full" data-number="9.1.4">
<h3 data-number="9.1.4" class="anchored" data-anchor-id="token-level-predictors-consistency-across-speakers"><span class="header-section-number">9.1.4</span> Token-level predictors: Consistency across speakers</h3>
<p>Sensitivity analysis for prior of random effects parameters</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="08_modeling_tactics_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="192"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="08_modeling_tactics_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
</div>
<p>Since the token-level predictor Following Context is crossed with Speaker, the data have higher resolution than is offered by the average profiles that we have extracted above. Thus, we have information about this predictor at the level of the individual speaker. We can assess the stability of the averaged pattern across the speakers in our sample. This type of variability is linguistically meaningful since it reveals the consistency with which a constraint operates across speakers. It will also add statistical indications that may inform questions about the generality of the pattern throughout the sampled and target population.</p>
<p>In principle, we could use a model that directly estimates the pattern for each speaker. While this approach has intuitive appeal, it only works if we have, for each speaker, enough tokens for each level of the token-level factor. Even though we have an appreciable number of tokens, overall, for each speaker, the cross-classification of Following Context and Speaker in <a href="03_data_structure.html#fig-ing-following-context-crossed-with-speaker" class="quarto-xref">Figure&nbsp;<span>4.8</span></a> showed that many speakers produced few pre-pausal and pre-velar tokens. We therefore need a more general approach to the assessment of between-speaker consistency with regard to language-internal factors.</p>
<p>In multilevel models, the variability among speakers is absorbed into the variational structure of the model. This part of our statistical model includes the batches of random intercepts and random slopes. Random intercepts express the variation among speakers in the overall rate of <em>g</em>-dropping and random slopes express the variation among speakers in the patterns observed for factors that can vary within a speaker. These are typically language-internal factors such as token-level and word-level predictor. Whil the behavior of each speaker informs the estimation of the variational part of the model, this variation is documented in the form of summary measures that aim to condense this information into a few numbers. There are two types of quantities involved: standard deviations and correlations. Together, they form a highly abstract report of the patterns of variation.</p>
<p>It is rarely the case that these summary measures of variational structure are directly interpretable. Even in simple settings where we have only a single random intercept standard deviation, this will still be on the logit scale. We therefore need to post-process these measures into interpretable quantities. To this end, we will use the following strategy. Recall that the random effects parameters (standard deviations and correlations) condense the data-based clues about between-speaker variability into a handful of numbers. We will use these parameters to simulate a set of, say, 500 imaginary speakers, who mirror the structure of between-speaker variation preserved by our model. We will use these fabricated individuals to extract quantities at the idiographic level of description and behavior. An essential part of this strategy is to preserve the integrity of the (fabricated) speaker for visualization and computation of summary measures.</p>
<p>Let us now consider the token-level factor Following Context, which has 4 levels: coronal, other, pause, and velar. In our regression model, this predictor is represented by three terms. We used sum contrasts to represent the predictor, and the model therefore produces the following summary:</p>
<p><span class="math display">\[
\left[\begin{array}{lll}
  \sigma_{1} &amp; \rho_{12}  &amp; \rho_{13} \\
             &amp; \sigma_{2} &amp; \rho_{23} \\
             &amp;            &amp; \sigma_{3}
\end{array}\right]
\]</span></p>
<p>Our first step, then, is to reconstruct the standard deviations and correlations for (and among) the 4 levels. Technically, what we do is generate 500 imaginary speakers and then compute standard deviations and correlations from this set of fabricated speakers:</p>
<p><span class="math display">\[
\left[\begin{array}{llll}
  \sigma_{\textrm{coronal}} &amp; \rho_{\textrm{other}}^{\textrm{coronal}}  &amp; \rho_{\textrm{pause}}^{\textrm{coronal}} &amp; \rho_{\textrm{velar}}^{\textrm{coronal}} \\
             &amp; \sigma_{\textrm{other}} &amp; \rho_{\textrm{pause}}^{\textrm{other}} &amp; \rho_{\textrm{velar}}^{\textrm{other}} \\
             &amp;            &amp; \sigma_{\textrm{pause}} &amp; \rho_{\textrm{velar}}^{\textrm{pause}} \\
             &amp;            &amp;                          &amp; \sigma_{\textrm{velar}}
\end{array}\right]
\]</span></p>
<p>These standard deviations and correlations are more informative. For instance, we now have a standard deviation for each following context. This measure of spread is on the logit scale, so we need to be careful when interpreting it. We will return to this point shortly. Nevertheless, we now have summary figures for all contexts:</p>
<p><span class="math display">\[
\left[\begin{array}{rrrr}
  0.27 &amp;  -.05 &amp; -.01 &amp; -.38\\
             &amp;  0.47 &amp; +.12 &amp; -.72\\
             &amp;            &amp; 0.37  &amp; -.62\\
             &amp;            &amp;      &amp; 0.72
\end{array}\right]
\]</span></p>
<p>Such summaries are useful, but the suggested patterns of variability can be made more transparent through visualization. <a href="#fig-ing-speaker-consistency-following-consonant" class="quarto-xref">Figure&nbsp;<span>9.5</span></a> shows a set of 500 synthetic speakers, which are simulated based on the posterior medians of the random effects parameters. The think line that runs through the center represents the average pattern over the speakers in our sample. The thin lines represent the simulated individuals. Each imagined speaker adds a profile to the plot. While these are imagined individuals, their joint distribution mimics that of the speakers in our sample.</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-ing-speaker-consistency-following-consonant" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-ing-speaker-consistency-following-consonant-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-speaker-consistency-following-consonant-1.png" class="img-fluid figure-img" width="422">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-ing-speaker-consistency-following-consonant-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.5: Visualization of the consistency of the difference in the share of [ɪŋ] between velar and coronal contexts.
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-ing-speaker-consistency-following-consonant-iconarray" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ing-speaker-consistency-following-consonant-iconarray-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-speaker-consistency-following-consonant-iconarray-1.png" class="img-fluid figure-img" width="192">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig" id="fig-ing-speaker-consistency-following-consonant-iconarray-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.6: Visualization of the consistency of the difference in the share of [ɪŋ] between velar and coronal contexts using an icon array. The 90% posterior interval is given in brackets.
</figcaption>
</figure>
</div>
</div></div></div>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-ing-logit-sd-proportion" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-ing-logit-sd-proportion-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-logit-sd-proportion-1.png" class="img-fluid figure-img" width="422">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-ing-logit-sd-proportion-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.7: Mapping the SDs to the proportion scale.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="word-level-predictors-consistency-across-speakers" class="level3 page-columns page-full" data-number="9.1.5">
<h3 data-number="9.1.5" class="anchored" data-anchor-id="word-level-predictors-consistency-across-speakers"><span class="header-section-number">9.1.5</span> Word-level predictors: Consistency across speakers</h3>
<p>Since word-level predictors are crossed with Speaker, we can likewise examine their consistency across speakers. We will start with the continuous predictor Frequency. <a href="#fig-ing-speaker-consistency-frequency" class="quarto-xref">Figure&nbsp;<span>9.8</span></a> shows the amount of between-speaker variation in the association between Frequency and the share of ing. Apparently, the relation between Frequency and the response variable is very consistent across individuals, While the magnitude of the pattern (i.e.&nbsp;the slope of the regression line) varies among individuals, the model expects very few speakers to have small (or even a reverse) frequency effect.</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-ing-speaker-consistency-frequency" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-ing-speaker-consistency-frequency-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-speaker-consistency-frequency-1.png" class="img-fluid figure-img" width="422">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-ing-speaker-consistency-frequency-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.8: Visualization of the consistency of the association between Frequency and the share of [ɪŋ].
</figcaption>
</figure>
</div>
</div>
</div>
<p>The icon array in <a href="#fig-ing-speaker-consistency-frequency-iconarray" class="quarto-xref">Figure&nbsp;<span>9.9</span></a> underscores this remarkable level of stability. On average, 100 out of 100 speakers are expected to show the same directionality.</p>
<div class="cell page-columns page-full">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-ing-speaker-consistency-frequency-iconarray" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ing-speaker-consistency-frequency-iconarray-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-speaker-consistency-frequency-iconarray-1.png" class="img-fluid figure-img" width="192">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig" id="fig-ing-speaker-consistency-frequency-iconarray-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.9: Visualization of the between-speaker consistency of the association between Frequency and the share of [ɪŋ] using an icon array. The 90% posterior interval is given in brackets.
</figcaption>
</figure>
</div>
</div></div></div>
<p><a href="#fig-ing-speaker-consistency-wordclass" class="quarto-xref">Figure&nbsp;<span>9.10</span></a> shows between-speaker variation for the predictor Lexcial Category. The cline across word classes is very stabe across individuals.</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-ing-speaker-consistency-wordclass" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-ing-speaker-consistency-wordclass-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-speaker-consistency-wordclass-1.png" class="img-fluid figure-img" width="422">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-ing-speaker-consistency-wordclass-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.10: Visualization of the random effects distribution for Lexical Category: Assessment of the consistency of the pattern across speakers.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The icon array in <a href="#fig-ing-speaker-consistency-wordclass-iconarray" class="quarto-xref">Figure&nbsp;<span>9.11</span></a> compares the rate of g-dropping in nouns and verbs. This contrast is also remarkably stable across speakers.</p>
<div class="cell page-columns page-full">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-ing-speaker-consistency-wordclass-iconarray" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ing-speaker-consistency-wordclass-iconarray-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-speaker-consistency-wordclass-iconarray-1.png" class="img-fluid figure-img" width="192">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig" id="fig-ing-speaker-consistency-wordclass-iconarray-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.11: Visualization of the consistency of the difference in the share of [ɪŋ] between nouns and verbs using an icon array. The 90% posterior interval is given in brackets.
</figcaption>
</figure>
</div>
</div></div></div>
<p>Finally, <a href="#fig-ing-speaker-consistency-pre-sound" class="quarto-xref">Figure&nbsp;<span>9.12</span></a> shows the consistency of variation as a function of the preceding sound.</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-ing-speaker-consistency-pre-sound" class="quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-ing-speaker-consistency-pre-sound-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-speaker-consistency-pre-sound-1.png" class="img-fluid figure-img" width="422">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-ing-speaker-consistency-pre-sound-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.12: Visualization of the random effects distribution for Preceding Sound: Assessment of the consistency of the pattern across speakers.
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-ing-speaker-consistency-preceding-consonant-iconarray" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ing-speaker-consistency-preceding-consonant-iconarray-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08_modeling_tactics_files/figure-html/fig-ing-speaker-consistency-preceding-consonant-iconarray-1.png" class="img-fluid figure-img" width="192">
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig" id="fig-ing-speaker-consistency-preceding-consonant-iconarray-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.13: Visualization of the consistency of the difference in the share of [ɪŋ] between preceding velar and coronal consonants using an icon array. The 90% posterior interval is given in brackets.
</figcaption>
</figure>
</div>
</div></div></div>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Cedergren_Sankoff1974" class="csl-entry" role="listitem">
Cedergren, Henrietta J., and David Sankoff. 1974. <span>“Variable Rules: <span>P</span>erformance as a Statistical Reflection of Competence.”</span> <em>Language</em> 50 (2): 333–55. <a href="https://doi.org/10.2307/412441">https://doi.org/10.2307/412441</a>.
</div>
<div id="ref-Kay_etal2016" class="csl-entry" role="listitem">
Kay, Matthew, Tara Kola, Jessica R. Hullman, and Sean A. Munson. 2016. <span>“When (Ish) Is My Bus? User-Centered Visualizations of Uncertainty in Everyday, Mobile Predictive Systems.”</span> In <em>Proceedings of the 2016 CHI Conference on Human Factors in Computing Systems</em>, 5092–5103. New York: Association for Computing Machinery. <a href="https://doi.org/10.1145/2858036.2858558">https://doi.org/10.1145/2858036.2858558</a>.
</div>
<div id="ref-Sidman1960" class="csl-entry" role="listitem">
Sidman, Murray. 1960. <em>Tactics of Scientific Research: <span>E</span>valuating Experimental Data in Psychology</em>. New York: Basic Books.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./07_foregrounding_variation.html" class="pagination-link" aria-label="Foregrounding variation">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Foregrounding variation</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./09_model_predictions.html" class="pagination-link" aria-label="Model summary: Adjusted predictions and comparisons">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Model summary: Adjusted predictions and comparisons</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>